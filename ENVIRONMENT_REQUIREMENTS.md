# 公司管理系统 - 环境依赖说明

## 概述

本文档详细说明了在 Windows 系统上成功部署和运行“公司管理系统”所需的全部环境和软件依赖。如果您在安装过程中遇到问题，请首先对照此文档检查您的环境。

我们提供了一个 **`环境检测.bat`** 工具，可以自动检查大部分依赖项，建议您首先运行它。

---

## 核心环境依赖

这是运行本系统 **必须** 安装的软件。

### 1. Node.js

-   **作用**：Node.js 是一个 JavaScript 运行环境，用于运行本系统的后端服务器。它也是执行安装、构建等所有脚本的基础。
-   **必需版本**：**v16.0.0** 或更高版本。推荐使用 **LTS (长期支持)** 版本。
-   **如何安装**：
    1.  访问官方网站：[https://nodejs.org/](https://nodejs.org/)
    2.  点击网站首页绿色的 **LTS** 版本下载按钮。
    3.  下载完成后，双击安装包，按照提示一直点击“下一步”即可完成安装。
-   **如何验证**：
    打开命令提示符（CMD）或 PowerShell，输入以下命令并按回车：
    ```bash
    node -v
    ```
    如果显示 `v16.x.x` 或更高的版本号，则表示安装成功。

### 2. npm (Node Package Manager)

-   **作用**：npm 是 Node.js 的包管理器，用于下载和管理项目所需的所有第三方库（即“依赖”）。
-   **必需版本**：通常随 Node.js 一起安装，无需单独安装。
-   **如何验证**：
    打开命令提示符，输入以下命令：
    ```bash
    npm -v
    ```
    如果显示版本号，则表示正常。

---

## 操作系统要求

-   **推荐系统**：**Windows 10** 或 **Windows 11**。
-   **最低要求**：Windows 8.1。更早的系统可能无法正常运行 Node.js 的新版本。

---

## 硬件与网络

### 硬件要求

| 组件 | 最低要求 | 推荐要求 |
| :--- | :--- | :--- |
| **处理器 (CPU)** | 双核处理器 | 四核或更高性能处理器 |
| **内存 (RAM)** | 4 GB | 8 GB 或更多 |
| **硬盘空间** | 5 GB 可用空间 | 10 GB 或更多可用空间 |

### 网络要求

-   **服务器**：需要稳定的网络连接，以便在安装依赖时从 npm 仓库下载文件。
-   **客户端**：需要能够访问到服务器所在的局域网。

---

## 常见问题与解决方案 (FAQ)

**Q1: 运行 `安装部署.bat` 时提示“'node' 不是内部或外部命令...”**

> **A1**: 这是因为系统没有找到 Node.js。请按照上文的说明下载并安装 Node.js。如果已经安装，请重启电脑后再试。

**Q2: 安装依赖时卡住或非常慢**

> **A2**: 这通常是网络问题。我们的脚本已默认使用国内的淘宝镜像源加速。如果仍然很慢，请检查您的网络连接，或尝试更换网络环境后重试。

**Q3: 安装依赖时出现大量 `EPERM` 或 `permission denied` 错误**

> **A3**: 这是权限问题。请尝试右键点击 `安装部署.bat`，选择“以管理员身份运行”。

**Q4: 双击 `启动服务器.bat` 后窗口一闪而过**

> **A4**: 这表示服务器启动失败。请按以下步骤排查：
> 1.  确保您已经成功运行了 `安装部署.bat` 并完成了所有步骤。
> 2.  在项目文件夹中，按住 `Shift` 键并右键单击空白处，选择“在此处打开 PowerShell 窗口”或“在此处打开命令窗口”。
> 3.  在打开的窗口中，手动输入 `node server/index.cjs` 并按回车。
> 4.  查看窗口中显示的具体错误信息，并根据信息进行排查。

**Q5: 客户端无法连接到服务器**

> **A5**: 请检查以下几点：
> 1.  确保服务器已在运行（`启动服务器.bat` 的窗口没有关闭）。
> 2.  确保客户端输入的服务器 IP 地址和端口号正确无误。
> 3.  检查服务器的防火墙是否已放行对应的端口。
> 4.  确保客户端和服务器在同一个局域网内，并且网络通畅（可以尝试在客户端电脑上 `ping <服务器IP>`）。
